<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <head th:replace="~{fragments/head :: head('マイページ')}"></head>
</head>
<body>
    <div th:replace="~{fragments/header :: header}"></div>

    <main class="container">
    <h1 class="page-title">
        <span th:text="${user.username} + ' さんのマイページ'">ユーザーさんのマイページ</span>
    </h1>

    <h2>お気に入りした映画</h2>

    <div th:if="${not #lists.isEmpty(favoriteMovies)}">
        <div th:each="movie : ${favoriteMovies}">
            <div th:replace="~{fragments/movie_card :: card(${movie})}"></div>
        </div>
    </div>

    <div th:if="${moviePage.totalPages > 1}" class="pagination">
        <a th:if="${moviePage.hasPrevious()}" 
           th:href="@{/mypage(page=${moviePage.number})}" class="page-link">&laquo; 前へ</a>
        
        <span th:text="${moviePage.number + 1} + ' / ' + ${moviePage.totalPages}"></span>

        <a th:if="${moviePage.hasNext()}" 
           th:href="@{/mypage(page=${moviePage.number + 2})}" class="page-link">次へ &raquo;</a>
    </div>
    
    <div th:if="${#lists.isEmpty(favoriteMovies)}" class="empty-state">
        <p>まだお気に入りの映画はありません。</p>
        <a th:href="@{/movies/search}" class="cta-button">映画を探しに行く</a>
    </div>
</main>

    <div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>

    <header th:fragment="header">

        <div class="site-header">
            
            <div class="header-upper">
                <div class="header-container">
                    
                    <div class="header-logo">
                        <a th:href="@{/}">
                            <img th:src="@{/images/logo_image.png}" alt="„É≠„Ç¥" class="logo-img">
                        </a>
                    </div>

                    <div class="header-search-area">
                        <form th:action="@{/movies/result}" method="get" class="search-form-styled">
                            <select class="search-select">
                                <option>„Åô„Åπ„Å¶</option>
                                <option>‰ΩúÂìÅÂêç</option>
                                <option>„Çø„Ç∞</option>
                            </select>
                            
                            <input type="text" name="query" placeholder="Êò†Áîª„ÇÑÊ∞óÂàÜ„ÇíÊ§úÁ¥¢..." class="search-input-styled">
                            
                            <button type="submit" class="search-btn-styled">
                                üîç
                            </button>
                        </form>
                    </div>

                    <div class="header-user-area">
                        <div sec:authorize="isAnonymous()" class="auth-buttons">
                            <a th:href="@{/login}" class="btn btn--primary">„É≠„Ç∞„Ç§„É≥</a>
                            <a th:href="@{/register}" class="btn btn-register">Êñ∞Ë¶èÁôªÈå≤</a>
                        </div>
                        
                        <div sec:authorize="isAuthenticated()" class="user-menu">
                            <a th:href="@{/mypage}" class="user-icon-link">
                                <span class="user-icon-placeholder">üë§</span>
                                <span class="user-name-label">„Éû„Ç§„Éö„Éº„Ç∏</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="header-lower">
                <div class="header-container">
                    <nav class="global-nav">
                        <ul class="nav-list">
                            
                            <li class="nav-item">
                                <a th:href="@{/}" class="nav-link-item">üè† „Éõ„Éº„É†</a>
                            </li>

                            <li class="nav-item dropdown-trigger">
                                <a href="#" class="nav-link-item">üî• „Éà„É¨„É≥„Éâ„Éª„É©„É≥„Ç≠„É≥„Ç∞ ‚ñº</a>
                                
                                <div class="dropdown-panel">
                                    <div class="dropdown-content">
                                        <div class="dropdown-col">
                                            <div class="dropdown-header">üìà ÊÄ•‰∏äÊòá„ÅÆ‰ΩúÂìÅ</div>
                                            <ul class="dropdown-list" th:if="${headerTrendMovies != null}">
                                                <li th:each="movie, stat : ${headerTrendMovies}">
                                                    <a th:href="@{/movie/{tmdbId}(tmdbId=${movie.tmdbId})}">
                                                        <span class="rank-badge" th:text="${stat.count}">1</span>
                                                        <span th:text="${movie.title}">„Çø„Ç§„Éà„É´</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="dropdown-col">
                                            <div class="dropdown-header">üè∑Ô∏è ‰∫∫Ê∞ó„ÅÆ„Çø„Ç∞</div>
                                            <div class="dropdown-tags" th:if="${rankingTags != null}">
                                                <a th:each="tag : ${rankingTags}" 
                                                   th:href="@{/movies/by_tag/{id}(id=${tag.id})}" 
                                                   class="dropdown-tag">
                                                   <span th:text="'#' + ${tag.name}">#„Çø„Ç∞</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            
                            <li class="nav-item">
                                <a th:href="@{/#about}" class="nav-link-item">üí° „Åì„ÅÆ„Çµ„Ç§„Éà„Å´„Å§„ÅÑ„Å¶</a>
                            </li>
                            

                            <li class="nav-item">
                                <a th:href="@{/#howto}" class="nav-link-item">üìñ ‰Ωø„ÅÑÊñπ</a>
                            </li>

                            
                            <li class="nav-item" sec:authorize="isAuthenticated()">
                                <form th:action="@{/logout}" method="post" style="display:inline;">
                                    <button type="submit" class="nav-link-item btn btn--ghost">üö™ „É≠„Ç∞„Ç¢„Ç¶„Éà</button>
                                </form>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

    </header>

</body>
</html>